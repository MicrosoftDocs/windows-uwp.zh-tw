---
author: stevewhims
Description: The previous topic (How the Resource Management System matches and chooses resources) looks at qualifier-matching in general. This topic focuses on language-tag-matching in more detail.
title: 資源管理系統如何比對語言標記
template: detail.hbs
ms.author: stwhi
ms.date: 11/02/2017
ms.topic: article
keywords: Windows 10, uwp, 資源, 影像, 資產, MRT, 限定詞
ms.localizationpriority: medium
ms.openlocfilehash: f64072f2f04b5cd45b3b75ccad908ef6906c00f5
ms.sourcegitcommit: 753e0a7160a88830d9908b446ef0907cc71c64e7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/29/2018
ms.locfileid: "5751956"
---
# <a name="how-the-resource-management-system-matches-language-tags"></a>資源管理系統如何比對語言標記

上一個主題 ([資源管理系統如何比對和選擇資源](how-rms-matches-and-chooses-resources.md)) 主要綜觀限定詞比對。 本主題著重於語言標記比對的細節。

## <a name="introduction"></a>簡介

含有語言標記限定詞的資源是根據應用程式執行階段語言清單進行比較和評分。 如需了解不同語言清單的定義，請參閱[了解使用者設定檔語言和應用程式資訊清單語言](../design/globalizing/manage-language-and-region.md)。 系統會先比對清單中的第一個語言，然後再比對清單中的第二個語言，即使是其他地區變體也一樣。 例如，如果應用程式執行階段語言為 en-US，則會優先選擇 en-GB 資源，而不是 fr-CA 資源。 只在 形式沒有任何資源時，才會選擇 fr-CA 資源 (請注意，應用程式的預設語言在這種情況下，可能不會設定為任何形式的 en)。

評分機制使用包含在 [BCP-47](http://go.microsoft.com/fwlink/p/?linkid=227302) 子標記登錄中的資料及其他資料來源。 該機制允許使用不同品質相符項目的評分梯度，當提供多個候選項目時，會選取分數最符合的候選項目。

因此，您可用一般詞彙標記語言內容，但是您仍然可以視需要指定特定的內容。 例如，您的 App 可能會擁有許多美國、英國和其他地區通用的英文字串。 將這些字串標示為「en」(英文) 可節省空間和當地語系化費用。 當需要區別時，例如包含「色彩/顏色」用詞的字串，可以使用語言和地區子標記「en-US」和「en-GB」分別標記美國和英國版本。

## <a name="language-tags"></a>語言標記

語言是使用標準化、格式正確的 BCP-47 語言標記來識別。 子標記元件是在 BCP-47 子標記登錄中定義。 BCP-47 語言標記的標準結構是由一個或多個下列子標記項目組成。

- 語言子標記 (需要)。
- 字集子標記 (這可使用子標記登錄中指定的預設值推斷)。
- 地區子標記 (選用)。
- 變體子標記 (選用)。

可能會出現其他子標記項目，但是它們對於語言比對的影響微不足道。 使用萬用字元 (「*」) 定義沒有語言範圍，例如「en-*」。

## <a name="matching-two-languages"></a>比對兩種語言

每當 Windows 比較兩種語言時，通常是在較大程序的內容中完成。 這可能是在評估多種語言的背景下進行，例如在 Windows 產生應用程式語言清單時進行 (請參閱[了解使用者設定檔語言和應用程式資訊清單語言](../design/globalizing/manage-language-and-region.md))。 Windows 會藉由比對使用者慣用的多種語言和應用程式資訊清單中指定的語言來進行。 也可能在評估語言的內容中加上特定資源的其他限定詞，來進行比較。 其中一個範例是當 Windows 將特定的檔案資源解析為特定資源內容時；將使用者的家鄉位置或裝置目前的縮放或 dpi 做為其他因素 (除了語言之外)，即納入資源選取項目的因素。

當比較兩種語言標記時，會根據相符項目的相近度給分。

| 比對 | 分數 | 範例 |
| ----- | ----- | ------- |
| 完全相符 | 最高 | en-AU : en-AU |
| 變體相符 (語言、字集、地區、變體) |  | en-AU-variant1 : en-AU-variant1-t-ja |
| 地區相符 (語言、字集、地區) |  | en-AU : en-AU-variant1 |
| 部分相符 (語言、字集) |  |  |
| - 宏觀地區相符 |  | en-AU : en-053 |
| - 地區中立相符 |  | en-AU : en |
| - 正交相關性相符 (有限的支援) |  | en-AU : en-GB |
| - 慣用地區相符 |  | en-AU : en-US |
| - 任何地區相符 |  | en-AU : en-CA |
| 未定的語言 (任何語言相符) |  | en-AU : und |
| 不相符 (字集不符或主要語言標記不符) | 最低 | en-AU : fr-FR |

### <a name="exact-match"></a>完全相符

標記完全相等 (所有子標記項目相符)。 可以將一項比較從變體相符或地區相符升階至此比對類型。 例如，en-US 與 en-US 相符。

### <a name="variant-match"></a>變體相符

語言、字集、地區和變體子標記的標記相符，但是它們在某些方面又不相同。

### <a name="region-match"></a>地區相符

語言、字集和地區子標記的標記相符，但是它們在某些方面又不相同。 例如，de-DE-1996 與 de-DE 相符，而 en-US-x-Pirate 與 en-US 相符。

### <a name="partial-matches"></a>部分相符

語言和字集子標記的標記相符，但是它們在地區或某些其他子標記又不相同。 例如，en-US 與 en 相符，或是 en-US 與 en-\* 相符。

#### <a name="macro-region-match"></a>宏觀地區相符

語言和字集子標記的標記相符；兩個標記都有地區子標記，其中一個代表包含其他地區的宏觀地區。 宏觀地區子標記一律都是數值，並且衍生自聯合國統計司 M.49 國家和區域代碼。 如需包含關係的詳細資訊，請參閱[宏觀地理 (大陸) 地區、地理子地區和所選取經濟和其他群組的組合](http://go.microsoft.com/fwlink/p/?LinkId=247929)。

**注意** BCP-47 中不支援「經濟群組」或「其他群組」的UN 代碼。
 
**注意** 具有宏觀地區子標記「001」的標記會被視為等於地區中立標記。 例如，「es 001」和「es」被視為同義。

#### <a name="region-neutral-match"></a>地區中立相符

語言和字集子標記的標記相符，以及只有一個標記有地區標記。 上層相符優先於其他部分相符。

#### <a name="orthographic-affinity-match"></a>正交相關性相符

語言和字集子標記的標記相符，以及地區子標記有正交相關性。 相關性仰賴保留在 Windows 中定義語言特定同盟地區的資料，例如「en-IE」和「en-GB」。

#### <a name="preferred-region-match"></a>慣用地區相符

語言和字集子標記的標記相符，以及其中一個地區子標記是語言的預設地區子標記。 例如「fr-FR」是「fr」子標記的預設地區。 因此 fr-FR 與 fr-BE 的相符性比 fr-CA 更高。 這仰賴保留在 Windows 中為 Windows 當地語系化的每一種語言定義預設地區的資料。

#### <a name="sibling-match"></a>同層級相符

語言和字集子標記的標記相符，並且二者都有地區子標記，但是之間沒有定義其他關係。 在多個同層級相符的情況下，贏家將會是最後一個列舉的同層級但是沒有較高的相符項。

### <a name="undetermined-language"></a>未定的語言

資源可能會被標記為「und」以表示它與任何語言相符。 此標記也可能會搭配使用字集標記，來依據字集篩選相符項目。 例如，「und-Latn」將與使用拉丁文書寫體的任何語言標記相符。 如需詳細資訊，請參閱下方。

### <a name="script-mismatch"></a>字集不符

當只有主要語言標記而不是指令碼的標記相符時，配對會被視為不符合，並且分數會在有效相符的層級以下。

### <a name="no-match"></a>不相符

不相符主要語言子標記的評分會低於有效相符的等級。 例如，zh-Hant 與 zh-Hans 不相符。

## <a name="examples"></a>範例

使用者語言「zh-Hans-CN」(簡體中文 (中國)) 以顯示的優先順序符合下列資源。 X 表示不相符。

![簡體中文 (中國) 的比對](images/language_matching_1.png)

1. 完全相符；2。 & 3。 地區相符；4。 上層相符；5。 同層級相符。

當語言子標記有 BCP-47 子標記登錄中所定義的隱藏字集值，就會發生對應的比對，接受隱藏字集代碼的值。 例如，en-Latn-US 與 en-US 相符。 在下一個範例中，使用者語言是「en-AU」(英文 (澳洲))。

![英文 (澳洲) 的比對](images/language_matching_2.png)

1. 完全相符；2。 宏觀地區相符；3。 地區中立相符；4。 正交相關性相符；5。 慣用地區相符；6。 同層級相符。

## <a name="matching-a-language-to-a-language-list"></a>比對語言和語言清單

有些時候，比對單一語言和語言清單的較大程序會發生相符。 例如，可能有以單一語言為基礎的資源與 App 的語言清單相符。 相符項的分數是以清單中第一個相符語言的位置進行加權。 語言在清單中的位置越低，分數就越低。

當語言清單包含兩個或更多具有相同語言和字集子標記的地區變體時，第一個語言標記的比較只有完全相符、變體相符和地區相符會計分。 部分相符的計分會延遲到最後一個地區變體。 這可讓使用者精確控制語言清單的比對行為。 相符行為可能包含，如果有第三個項目符合第一個語言和字集，允許清單中第二個項目的完全符合優先於清單中第一個項目的部分相符。 範例如下。

- 語言清單 (依序排列)：「pt-PT」(葡萄牙文 (葡萄牙))、「en-US」(英文 (美國))、「pt-BR」(葡萄牙文 (巴西))。
- 資源：「en-US」、「pt-BR」。
- 較高分數的資源：「en-US」。
- 描述：比較從「pt-PT」開始，但找不到完全相符。 因為使用者的語言清單中存在「pt-BR」，所以部分相符延遲到與「pt-BR」的比較。 下一個語言比較是具有完全符合的「en-US」。 因此，獲勝資源是「en-US」。

或

- 語言清單 (依序排列)：「es-MX」(西班牙文 (墨西哥))、「es-HO」(西班牙文 (宏都拉斯))。
- 資源：「en-ES」、「es-HO」。
- 較高分數的資源：「es-HO」。

## <a name="undetermined-language-und"></a>未定的語言 (「und」)

語言標記「und」可能用來指定沒有更好的相符者時將匹配任何語言的資源。 它可以視為類似 BCP-47 語言範圍「*」或「*-&lt;字集&gt;]。 範例如下。

- 語言清單：「en-US」、「zh-Hans-CN」。
- 資源：「zh-Hans-CN」、「und」。
- 較高分數的資源：「und」。
- 描述：比較從「en-US」開始，但是找不到根據「en」(部分或更佳) 相符者。 因為有標記「und」的資源，所以比對演算法會使用它。

標記「und」可讓多個語言共用單一資源，並允許將個別語言視為例外。 範例如下。

- 語言清單：「zh-Hans-CN」、「en-US」。
- 資源：「zh-Hans-CN」、「und」。
- 較高分數的資源：「zh-Hans-CN」。
- 描述：比較會尋找第一個項目的完全相符，所以它不會檢查標示為「und」的資源。

您可以使用「und」和字集標記按字集來篩選資源。 範例如下。

- 語言清單：「ru」。
- 資源：「und-Latn」、「und-Cyrl」、「und-Arab」。
- 較高分數的資源：「und-Cyrl」。
- 描述：比較找不到「ru」的相符項 (部分或更佳)，所以比對語言標記「und」。 與「ru」關聯的隱藏字集值「Cyrl」與資源「und-Cyrl」相符。

## <a name="orthographic-regional-affinity"></a>正交地區相關性

當具有地區子標記差異的兩個語言標記相符時，地區的特定配對可能比起其他項目彼此有更高的相關性。 唯一支援的相關群組是英文 (「en」)。 地區子標記「PH」(菲律賓) 和「LR」(賴比瑞亞) 具有與「US」地區子標記的正交相關性。 所有其他地區子標記與「GB」(英國) 地區子標記相關。 因此，「en-US」與「en-GB」資源均可使用時，「en-HK」(英文 (香港特別行政區)) 語言清單的「en-GB」資源會獲得比「en-US」資源較高的分數。

## <a name="handling-languages-with-many-regional-variants"></a>處理具有許多地區變體的語言

特定語言在使用各種不同語言的不同地區有較大的使用者社群&mdash;語言有例如英文、法文和西班牙文，屬於多語 App 中最常支援的語言。 地區差異可能包括正寫法不同 (例如，「色彩」與「顏色」）或方言不同，例如詞彙 (例如，「卡車」與「貨車」)。

製作全球化的 App 時，這些具有重大地區變體的語言存在某些挑戰：「應該支援多少個不同地區變體？」 「哪幾個？」 「管理我的 App 的這些地區變體資產最具成本效益方式為何？」 如要回答所有這些問題，這已超出本主題的範圍。 不過，在 Windows 中的語言比對機制，確實提供可協助您處理地區變體的功能，。

App 通常只支援任何指定語言的單一種類。 假設 App 擁有僅一種英文的資源，預期將由英文使用者使用，無論他們來自什麼地區。 在此情況下，沒有任何地區子標記的標記「en」會影響該期望。 但是 App 可能有過去使用過的標記，例如包含地區子標記的「en-US」。 如此一來，這也可行：App 只使用一種英文，並且 Windows 會適當地針對不同地區變體，使用使用者喜好設定來處理為一個地區變體標記的相符資源。

如果將有兩個或更多地區變體要支援，但是，例如「en」與「en-US」的差異可能對使用者體驗會有顯著的影響的，並且考慮要使用的地區子標記也相形重要。

假設您想要為加拿大使用的法文與歐洲法文提供法文的不同當地語系化。 對於加拿大法文，可以使用「fr-CA」。 針對歐洲的語言使用者，當地語系化將使用法文 (法國)，如此「fr-FR」可用於該項。 但是若指定的使用者是來自比利時，語言喜好設定是「fr-BE」；他們將會取得什麼？ 地區「BE」與「FR」和「CA」不同，為二者建議「任何地區」相符項。 不過，法國剛好是法文的慣用地區，因此這種情形下「fr-FR」將會被視為最佳相符項。

假設您第一次當地語系化您的 App 為一種法文，使用法文 (法國) 字串但一般將其歸類為「fr」，然後您想要為加拿大法文新增支援。 也許只有特定資源需要重新翻譯為加拿大法文。 您可以繼續使用所有原始資產，保持將其歸類為「fr」，然後只新增少量使用「fr-CA」的新資產。 如果使用者語言喜好設定為「fr-CA」，則「fr-CA」資產將會有比「fr」資產較高的相符分數。 但若使用者語言喜好設定是任何其他種的法文，則地區中立的資產「fr」將會是比「fr-CA」資產更好的相符項。

另一個範例是，假設您想要為西班牙的使用者和拉丁美洲的使用者，提供分別的當地語系化。 進一步假設墨西哥廠商提供拉丁美洲翻譯。 您應該對於兩組資源使用「es-ES」(西班牙) 和「es-MX」(墨西哥) 嗎？ 若是如此，對於其他拉丁美洲地區的使用者，例如阿根廷或哥倫比亞，可能會產生問題，因為他們將取得「es-ES」資源。 在這種情形下，有較好的替代方式：您可以使用宏觀地區子標記「es-419」，來反映您想要用於拉丁美洲或加勒比海任何部分的使用者。

如果您想要支援多種地區，地區中立語言標記和宏觀地區子標記可能非常有效。 若要將您需要的個別資產數目降至最少，您可以反映其適用的最大涵蓋範圍的方式，來限定指定的資產。 然後依需要以更特定的變體，補充廣泛適用的資產。 使用地區中立語言限定詞的資產，將用於任何地區的使用者，除非有另一個資產有更地區特定的限定詞適用於該使用者。 例如「en」將符合澳大利亞英文的使用者，但使用「en-053」(澳洲或紐西蘭使用的英文) 的資產對該使用者將會是更好的相符項，同時使用「en-AU」的資產將會是最佳的可能相符項。

英文需要特殊考量。 如果 App 新增兩個英文種類的當地語系化，這些可能會是美式英文和英國，或「國際」英文。 如前所述，美國以外特定地區遵照美國拼字規則，並且 Windows 語言比對會將其納入考量。 在本案例中，不建議對其中一個變體使用地區中立標記「en」；請改用「en-GB」和「en-US」。 （如果特定的資源不需要個別的變體，不過，可以使用「en」。）如果以「en」來取代「en-GB」或「en-US」，則會干擾 Windows 提供的正交地區相關性。 如果新增第三個英文當地語系化，則依需要為其他變體使用特定或宏觀地區子標記 (例如「en-CA」、「en-AU」或「en-053」），但是繼續使用「en-GB」和「en-US」。

## <a name="related-topics"></a>相關主題

* [資源管理系統如何比對和選擇資源](how-rms-matches-and-chooses-resources.md)
* [BCP-47](http://go.microsoft.com/fwlink/p/?linkid=227302)
* [了解使用者設定檔語言和應用程式資訊清單語言](../design/globalizing/manage-language-and-region.md)
* [宏觀地理 (大陸) 地區、地理子地區以及所選取經濟和其他群組的組合。](http://go.microsoft.com/fwlink/p/?LinkId=247929)
