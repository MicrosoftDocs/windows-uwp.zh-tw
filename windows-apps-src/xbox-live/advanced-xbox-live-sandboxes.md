---
title: 進階 Xbox Live 沙箱
description: 了解如何使用沙箱來隔離受管理的合作夥伴開發期間的內容。
ms.assetid: bd8a2c51-2434-4cfe-8601-76b08321a658
ms.date: 04/04/2017
ms.topic: article
keywords: xbox live、 xbox、 遊戲、 uwp、 一個 xbox、 xdk、 受管理的夥伴、 沙箱、 內容隔離
ms.localizationpriority: medium
ms.openlocfilehash: 5e95999fc132e5dcda556120e9cf42f9c302f654
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/06/2019
ms.locfileid: "57617143"
---
# <a name="advanced-xbox-live-sandboxes"></a>進階 Xbox Live 沙箱

> [!NOTE]
> 這篇文章說明沙箱的進階的用法，以及主要適用於大型的遊戲工作室具有多個小組和複雜的權限需求。  如果您是 Xbox Live 創作者計劃的一部分或ID@Xbox開發人員，建議您查看[Xbox Live 沙箱簡介](xbox-live-sandboxes.md)

Xbox Live*沙箱*提供整個私用程式開發環境。 本文件說明沙箱為何、 存在的原因、 如何將它們套用至發行者，以及它們如何影響內部 Xbox 團隊。 這份文件的對象是發佈者建置的 Xbox One 的內容，並使用沙箱。

## <a name="isolate-content-on-xbox-live"></a>找出在 Xbox Live 的內容

在 Xbox Live，則只有單一生產環境中所有的發行前版本 （在開發和測試版）、 憑證及零售內容所在的位置。

內容隔離是以確保沒有任何發行者內容流失，在生產環境中的方式。 基本上，內容隔離可確保任何主體的使用者、 裝置或要求存取資源 （「 標題 」 或 「 服務 」） 的權限的標題已被授權存取資源。 內容隔離，分割區分為 標題 或 服務的資料儲存所在的沙箱。 換句話說，授權原則會定義沙箱的範圍內。

沙箱是在生產環境中的資料分割資料的方法。 使用 Xbox 360 紀元服務，PartnerNet ProductionNet 等兩個不同的環境。 Xbox One 紀元服務，使用單一實際執行環境所含*n*不同的虛擬環境，其中每個虛擬環境稱為沙箱。 因為沒有單一的生產環境中的所有內容，沙箱會是其中一個環境中產生的資料不能跨越移轉到另一個是唯一的虛擬環境。

下圖顯示 「 發行者 」 可以在其中建立其私用的開發沙箱單一實際執行環境。 只有已獲授權的開發人員帳戶 」 或 「 開發人員套件才能夠存取這些沙箱。

圖 1. 在生產環境中的沙箱。

![](images/sandboxes/sandboxes_image1.png)

就像 PublisherA 有她的開發沙箱，其他 「 發行者 」 會有自己的開發沙箱。 相同的標題識別碼可能位於不同的沙箱，但標題識別碼產生的資料是不同的沙箱。

有兩個系統沙箱，才會填入 microsoft:憑證和零售版。 如名稱所示，CERT 沙箱是正在進行發行，零售沙箱時沙箱代表實際的金額，供所有的零售版的使用者和裝置的憑證之前的項目。

標題的識別碼已在 Xbox Live 前身為唯一的而現在標題的識別碼加上沙箱識別碼是唯一的。 同樣適用於產品識別碼和其他一次被視為唯一的識別碼空間。 現在必須配對並提供沙箱識別碼。 在 Xbox Live 的所有資料將會在整個系統的沙箱識別碼主要都分割。

## <a name="initial-setup-for-a-title"></a>項目的初始設定

在 Xbox 開發人員入口網站 (XDP) 或合作夥伴中心出生時標題。 本文件涵蓋在 XDP 中誕生的標題。 標題的識別碼、 產品識別碼和服務組態識別碼 (SCID) 指派項目。

在這個新世界中，標題或產品本身並不表示需要 Xbox Live 的項目。 因為我們必須支援同時的零售和開發工作採用單一項目的，我們必須支援*執行個體*的標題，以便進行和維持所需的差異。 標題的執行個體位於在沙箱中，這是沙箱會傳入。

若要建立一個標題 XDP 上，「 發行者 」 建立產品群組、 指定產品群組中，內容類型，然後建立其內的個別產品。 （如需詳細資訊，請參閱 XDP 文件。）下圖說明產品群組、 產品、 product 執行個體和沙箱之間的關聯性。

圖 2. 產品小組、 產品、 product 執行個體和沙箱之間關聯性。

![](images/sandboxes/sandboxes_image2.png)

<a name="product-instances"></a>Product 執行個體
-----------------
A *product 執行個體*是在特定的沙箱中的標題、 產品和組態資料的投影。 這項資料所述的下列三個區域： 服務組態、 目錄中繼資料，以及二進位檔。

### <a name="service-configuration"></a>服務組態

> 服務組態定義 （事件、 統計資料、 成績追蹤等）。 服務組態定義產品執行個體層級。

### <a name="catalog-metadata"></a>目錄中繼資料

> 位於 類別目錄，銷售文字藝術資產、 可用性/優惠資訊，包括授權資料等等的中繼資料。

### <a name="binary"></a>Binary

> 二進位檔可以表示在兩種方式之一：

1.  中繼資料，才能啟用側載。 這包括內容識別碼、 版本資訊，以及授權的資訊。

2.  完整的二進位檔會傳播至 CDN 和可下載至用戶端。

<a name="getting-the-access-right"></a>取得的存取權限
------------------------
有兩種不同內容中的 Xbox One 的存取權：

*設計階段存取*— 從透過 XDP 工具電腦的存取，可讓人在處理您的產品來上傳、 組織和使用內容、 組態和中繼資料，但不允許他們執行或播放您的產品的執行個體。

*執行階段存取*— 從 Xbox 主控台存取，可讓您的開發人員、 測試人員、 檢閱者和最終客戶連絡，以執行，並播放 product 執行個體。

> [!NOTE]
> 若要可供執行階段存取，必須在沙箱中放 product 執行個體。 一旦組建會放在沙箱中，XDP 使用者或已授與存取該沙箱的 devkit 裝置可以執行的執行個體。 若要這樣做，請他們登入 Xbox One 透過 Xbox 主控台中，使用他們的開發人員帳戶的其中一個 — 特殊帳戶該函式以虛擬使用者執行階段存取。

當我們提到沙箱時，我們會通常指的是執行階段存取 Xbox Live 執行的內容。 若要存取在 Xbox Live 服務，則標題識別碼則是必要項目。 一次**appxmanifest**包含標題的識別碼，主控台會將標題識別碼傳送到 Xbox Live。 Xbox Live 安全性服務不會提供傳回有效的語彙基元除非 （裝置或使用者） 的主體已獲授權的標題。

此驗證程序是內容隔離的關鍵。 當出現在極高的層級：

-   主體的群組可以包含 Xbox 使用者識別碼 (XUIDs)、 裝置識別碼、 標題的識別碼或服務識別碼。

-   沙箱可包含標題的識別碼、 產品識別碼或服務設定識別碼 (SCIDs)。

-   主體的群組都會在沙箱存取權。

因此，使用者或裝置來存取在沙箱中的發行前版本標題，必須被授與存取透過 XDP 第一次。

圖 3. 設定透過 XDP 存取模型。

![](images/sandboxes/sandboxes_image3.png)

內容隔離的效果是根據是以您的組織擁有下列程序：

-   建立您的 XDP 使用者帳戶，每位使用者將用以登入的執行階段存取，並在其中每個使用者被授與成員資格的使用者群組的開發人員帳戶。

-   建立裝置群組的受信任的主控台。

-   指定每個開發沙箱精確的使用者群組和裝置群組在 product 執行個體存取它。

下圖說明此設定的範例。

圖 4. 取得存取權的沙箱的未經授權的使用者認證失敗，因為進行一般授權 XDP 使用者帳戶的認證。 只有已獲授權的 XDP 使用者帳戶所擁有的開發人員帳戶的認證成功取得沙箱，以及所有目前在 product 執行個體的執行階段存取。

![](images/sandboxes/sandboxes_image4.png)

### <a name="dev-accounts-setup"></a>安裝開發人員帳戶

開發 Xbox One 帳戶是特殊的規則套用至它們的是標準的 Microsoft 帳戶 (MSA)。 它們可用於開發在 Xbox Live。 開發人員帳戶：

-   必須從 XDP 或合作夥伴中心建立。

-   指派外部開發人員 」 角色時由發行者所建立。

-   是繫結至 XDP 帳戶或建立開發人員帳戶的合作夥伴中心帳戶。

-   可以只登入開發套件。 登入拒絕零售裝置上的開發人員帳戶。

-   可以 Xbox Live 開發人員金級訂用帳戶或購買其他訂用帳戶免費為了測試。

### <a name="user-group-setup"></a>使用者群組設定

使用者群組、 主體，第一種是群組的 XDP 使用者的集合。 當 XDP 使用者新增至使用者群組時，則會在具有這些 XDP 使用者流程他們的開發人員帳戶。

因此當使用者群組指派至沙箱時，開發人員帳戶相關聯 XDP 使用者，使用者群組加入至適當的主要群組，並取得原則安裝與設定備份沙箱的主要資源主體的群組。

> [!NOTE]
> 建立以存取沙箱的使用者群組是用來防止 XDP 產品小組和產品的組態資料存取的相同使用者群組。

### <a name="device-setup"></a>裝置設定

裝置也會加入至主體的群組。 裝置只可用來當做一種開發套件，如果權利透過遊戲開發人員市集購買，而且該裝置已佈建是開發套件。 當裝置佈建為開發套件時，裝置就會出現在可以新增至裝置群組的裝置清單上。

### <a name="device-group-setup"></a>裝置群組設定

裝置群組，主體的群組，第二種可以也提供存取至沙箱。 安裝程式就像以上詳述的使用者群組設定。

## <a name="sandboxes"></a>沙箱

<a name="what-is-a-sandbox"></a>沙箱是什麼？
------------------
直接陳述*沙箱是在生產環境中的資料分割資料的方式*。

<a name="why-do-we-need-sandboxes"></a>為什麼需要沙箱？
-------------------------
就像使用者和裝置存取標題，標題會存取服務。 我們將介紹 「 標題群組 」 的項目集合會授與存取服務資源的概念。

因為沒有單一的實際執行環境的 Xbox One （發行前版本和零售版） 的所有內容，多個執行個體 （後置入發行/零售） 標題必須防止資源的相同執行個體上運作。

<a name="what-is-in-a-sandbox"></a>什麼是在沙箱中？
---------------------
沙箱會包含產品執行個體，為每個加入至沙箱的標題。

<a name="what-is-a-sandbox-id"></a>沙箱識別碼為何？
---------------------
沙箱識別碼是資料分割單位之資料的標題、 產品或服務組態。多個項目可以存在於相同的沙箱，這是必要條件，才能共用任何服務的組態資料。

沙箱識別碼 （區分大小寫） 是以下列格式的字串：&lt;PublisherMoniker&gt;。*n*。 範例沙箱識別碼、 XLDP.5，說明如下：

-   *發行者 moniker*是唯一的所有發行者。 因此，「 XLPD 」 是此特定發行者的發行者 moniker。 「 發行者 」 為 「 已啟動 」 XDP 中由開發人員帳戶管理員時，會建立 「 發行者 」 的 moniker。

-   數字 *"n"* 識別沙箱的號碼。 在此情況下，"5"時，會建立這個 「 發行者 」 的第六個沙箱。

當項目資料通過服務時，Xbox 服務會使用沙箱識別碼來唯一識別的資料，就會產生 「 環境 」。

<a name="what-data-is-sandboxed"></a>資料已沙箱化？
-----------------------
下圖顯示哪些使用者和標題的資料已沙箱化。

![](images/sandboxes/sandboxes_image5.png)

<a name="global-override-sandbox"></a>全域覆寫沙箱
-----------------------
開發人員在她的開發套件上設定沙箱識別碼，並因此設定開發套件執行中，沙箱這也稱為通用的覆寫沙箱。 因此，對 Xbox Live 服務 （例如，成就、 配對，授權，EDS 等） 的所有要求從標題 （殼層應用程式和規則的應用程式） 中的開發人員套件會在沙箱中。

全域覆寫沙箱也表示，只有全域覆寫沙箱中內嵌內容時才會顯示瀏覽。

<a name="types-of-sandboxes"></a>類型的沙箱
-------------------------------------------------------------------------------------------------------------------------------------------------------
有兩種不同的沙箱。 這些類別定義，如下所示：

-   *發行者沙箱*。 發行者可以存取其開發中的沙箱。 這些可能看起來像是 XLDP.0、 XLDP.1、 XLDP.2、 XLDP.3 等。這是發行者會在其中放置其標題 product 執行個體。 存取這些沙箱被閘道到 「 發行者 」 授與存取權的使用者/裝置

-   *Microsoft 沙箱*。 以下是內建的沙箱：零售和 CERT Microsoft 允許將發佈到這些受保護的沙箱。

<a name="cert-sandbox"></a>CERT 沙箱
------------
可供大眾標題時，它必須先經過認證。 CERT 沙箱是受 Microsoft 管制的沙箱憑證中的個人擁有的存取權。 發行者可以看到他們自己正在進行憑證內容。

在憑證中失敗的任何產品執行個體可以帶回至偵錯並修正由發行者使用 XDP 或合作夥伴中心所開發沙箱。

<a name="retail-sandbox"></a>零售沙箱
--------------
零售沙箱是針對 Xbox One 所建立的所有內容的最終目的地。

標題傳遞憑證之後，會將它新增至零售沙箱。 綠色的已簽署的內容可以在零售沙箱中執行。 這有很重要的含意發行者驅動的 beta 版也已完成在零售沙箱中。 在零售沙箱所產生的資料代表實際的客戶實際執行資料。

請注意，內容的存取權是零售沙箱是仍可透過內容隔離。

比方說，「 發行者 」 驅動的 beta 版會執行在零售沙箱中，「 發行者 」 選擇要存取發行者定義 beta 版資源組產品取得的主體的群組。 Beta 標題所產生的服務資料實際生產資料並存在標題上架至正式運作後繼續。

<a name="cross-sandbox-data-interaction"></a>跨沙箱資料互動
------------------------------
根據定義，沙箱會限制資料共用的容器。 因此，不可能跨沙箱資料互動。

## <a name="organizing-your-sandboxes"></a>組織您的沙箱

本章節提供 「 發行者 」 可以列印文件的組織，請沙箱的範例。 發行者必須了解如何使用沙箱來組織資料。  

以下只顯示執行階段存取管理內容的隔離與範例。

### <a name="scenario-1-two-titles-one-sandbox"></a>案例 1：兩個項目，一個沙箱

可能是 「 發行者 」 的基本結構：

-   所有使用者和設計階段和執行階段由發行者所擁有的裝置可都存取的兩個標題。

-   每個標題的一項產品執行個體。

在此情況下，「 發行者 」 端只需要單一的沙箱的發行前版本的所有內容。

下圖顯示的使用者群組。 發行者可以選擇使用裝置群組，而不是使用者群組，如果被視為更容易。 此外，此使用者群組會有沙箱 XLDP.1 和標題上的執行階段和設計階段存取，此沙箱中。

![](images/sandboxes/sandboxes_image6.png)

### <a name="scenario-2-one-title-different-teams"></a>案例 2：一個標題，不同的小組

在此模型的需求如下：

-   一個標題。

-   開發小組處理每日組建。

-   QA 小組處理每週 LKGs。

-   開發小組必須每週 LKGs 發生錯誤時進行偵錯。

-   財務小組需要存取的價格卡片和標題的類別目錄版本相關的其他中繼資料。

下圖顯示 TitleX 有兩個產品執行個體：PI-1，PI 2。 Product 執行個體必須是在沙箱中，兩個產品執行個體相同的項目不能在相同的沙箱。 因此，TitleX-PI-1 是在沙箱 XLDP.1 和 TitleX PI 2 是在沙箱 XLDP.2。

開發人員使用者群組具有存取這兩個沙箱，而 QA 使用者群組具有存取權僅沙箱 XLDP.2。

此外，財務使用者 (群組 C) 可以 TitleX 設計階段存取。 財務使用者群組則通常沒有標題的任何執行階段偵錯，因為它們會被分。

> [!NOTE]
> 組織，無論 XDP 使用者可以屬於一個以上的使用者群組。

![](images/sandboxes/sandboxes_image7.png)

### <a name="scenario-3-two-titles-completely-separate"></a>案例 3：兩個標題，完全不同

在此範例中，需求略有變更：

-   兩個標題。

-   每個書名的存取應該限制為一組特定的個人。

-   每個標題的一項產品執行個體。

-   系統管理員使用者群組的項目需要設計階段 XDP 組態資料的存取權的使用者。 此群組中的每個人的 「 發行者 」 端的所有系統管理員作業，而且可以控制發行至目錄 （目錄中繼資料、 財務、 行銷、 認證提交等等） 的所有資料

在此模型中，「 發行者 」 已選擇要保留這兩個完全分隔，並因此指派兩個不同的沙箱中這些兩個標題的標題。 「 發行者 」 端也已選擇要建立個別的系統管理員使用者群組，並指派存取權的兩個產品。

![](images/sandboxes/sandboxes_image8.png)

### <a name="scenario-4-anyway-you-like-it"></a>案例 4:您要的嗎

因為相當多的連線，並保持簡短的用語，我們已選擇顯示只沙箱執行階段的連線。 不會防止您新增其他設計階段存取權限。

在此範例中的需求如下：

-   只有特定人員可以存取其發行者內特定項目。

-   「 發行者 」 的運作方式與從不同公司的廠商，而且這些廠商可能短期。

-   「 發行者 」 端應該能夠解除委任的標題，並透過這種方式，防止任何廠商或 Fte 有權存取的資料存取。

若要建立這項需求的模型，可以採用下面的之類的結構。

遵循以下的模型是：

-   TitleX 和 TitleY 在沙箱 XLDP.1 只能有一個 product 執行個體每一個。

-   TitleZ 有兩個產品執行個體，一個在沙箱 XLDP.2，另一個沙箱 XLDP.3。

-   FTE 使用者群組 B 中所有的沙箱的產品執行個體都可以存取。

-   廠商使用者群組 A 是獲得存取權沙箱 XLDP.1 廠商專用的使用者群組。

-   廠商裝置群組 C 是獲得存取權沙箱 XLDP.3 廠商專用的使用者群組。

![](images/sandboxes/sandboxes_image9.png)

## <a name="determine-the-sandbox-your-device-is-targeting"></a>判斷您的裝置為目標的沙箱

Xbox Live Api 包含可讓您查看哪些標題的目標在執行階段的沙箱應用程式設定單一物件。 這是藉由存取**沙箱**屬性`xbox::services::xbox_live_app_config`。

C + + XDK
```cpp
auto appConfig = xbox::services::xbox_live_app_config::get_app_config_singleton();
string_t sandbox = appConfig->sandbox;
```

C# WinRT
```csharp
XboxLiveAppConfiguration appConfig = XboxLiveAppConfiguration.SingletonInstance;
string sandbox = appConfig.Sandbox;
```

> [!NOTE]
> [沙箱] 屬性未指定值，直到使用者登入。

## <a name="summary"></a>摘要

Xbox Live 開發會提供給發行者，以在生產環境品質的服務與生產 MSA 開發人員帳戶的生產環境中測試的大好機會。 在功能和彈性增加需要新的設定步驟中建立項目資料和管理存取權時標題，在開發過程中，並在那裡正式 XDP。

沙箱是在生產環境中的資料分割資料的方法。 因為沒有單一的生產環境中的所有內容，沙箱會作為 「 虛擬環境 」，其中一個環境中產生的資料不會跨越透過其他。
