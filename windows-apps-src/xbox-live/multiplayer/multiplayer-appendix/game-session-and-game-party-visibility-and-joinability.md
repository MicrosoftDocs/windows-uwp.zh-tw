---
title: 遊戲的工作階段的可見性和 joinability
description: Xbox Live 的遊戲工作階段和遊戲的合作對象的可見性和 joinability 描述。
ms.assetid: 39b6dac1-0c6b-4dc1-9fe0-3cb7c471fbab
ms.date: 04/04/2017
ms.topic: article
keywords: xbox live, xbox, 遊戲, uwp, windows 10, xbox one
ms.localizationpriority: medium
ms.openlocfilehash: 65da0d60080cd790b84ce46f8598c2f6f638ff05
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/06/2019
ms.locfileid: "57619713"
---
# <a name="game-session-and-game-party-visibility-and-joinability"></a>遊戲的工作階段和遊戲的合作對象的可見性和 joinability

Xbox One 上*可視性*並*joinability*設定遊戲工作階段和遊戲的合作對象，分別控制多人遊戲體驗的存取。 若要提供資料表聯結到工作階段，以及發出邀請的播放程式絕佳的使用者體驗到遊戲工作階段和合作對象，標題開發人員需要了解這些設定。 這份白皮書檢閱可見性和 joinability，之間的差異，也討論的建議標題使用他們的消費者提供最多人遊戲的使用者流程的特定設定。

## <a name="game-session-visibility"></a>遊戲的工作階段的可見性


多人遊戲工作階段目錄 (MPSD) 工作階段存取受限於兩個設定： 工作階段*可視性*和 工作階段*joinability*。 這些設定可以用來限制 MPSD 層級的工作階段存取。

存取控制的第一個層面是工作階段的可見性。 工作階段的可見性會在工作階段建立時設定的常數。 它通常定義在工作階段範本，並決定哪些類型的使用者具有讀取和寫入權限的工作階段。 可見性設定的值為：

-   *開啟 —* 所有的使用者可以讀取和寫入工作階段。

-   *Visible:* 可以讀取所有使用者，但只有已加入，而且保留播放程式可以寫入，工作階段。

-   *私用 —* 只加入，而保留的播放程式可以讀取或寫入的工作階段。

> **注意：** 為 [私人] 設定可見性可以在需要重試**join （)** 受邀的播放程式來呼叫。 如果透過平台 UI 傳送邀請，它可以接收其他播放器播放之前已在工作階段中保留該播放程式。 這種競爭狀況可能會造成**join （)** 呼叫失敗，因為私用或可見的工作階段需要保留聯結的播放程式的受邀的播放程式。
>
> 如果任何保留項目不存在，存取在工作階段 (HTTP/403) 會引發錯誤。 受邀的播放程式就必須重試**join （)** 作業，但重試不應嘗試頻率高於每隔五秒。 我們建議項目設定工作階段開啟到播放程式是連接流程期間避免競爭情形的可見性。

## <a name="game-session-joinability"></a>遊戲的工作階段 joinability


存取控制的第二個層面是 joinability。 它可以在工作階段存留期期間以動態方式設定，並決定哪些類型的使用者可以加入工作階段。 工作階段 joinability 值為：

-   *無*（預設值），有哪些人可以加入工作階段沒有限制。

-   *本機*— 只有本機使用者可以加入此工作階段。

-   *接著，* 只有本機使用者和後面接著其他工作階段成員的使用者可以加入未保留工作階段。

工作階段主機或仲裁程式可以建立私用的工作階段，透過 joinability 設定： 讓 joinability，本機或接著將遊戲的工作階段限制存取，並設為私用。

此外，工作階段主機或仲裁程式應追蹤的工作階段，joinability 使較舊的工作階段邀請可以拒絕在主機層級視。 比方說，如果任何受邀的玩家有未抵達加入工作階段及/或合作對象，直到工作階段已滿，主機或仲裁程式，可以指示任何聯結的播放程式工作階段已被鎖定，而它們需要保留工作階段及/或合作對象自動。

**注意：** 遊戲的工作階段 joinability 不會反映在合作對象應用程式 UI 中。 合作對象應用程式即使 joinability 會限制，邀請 UI 並**ShowSendInvitesAsync**可讓遊戲工作階段邀請。

## <a name="game-party-joinability"></a>遊戲的合作對象 joinability


除了控制 MPSD 工作階段標題，也有控制遊戲的合作對象 joinability 狀態。 此設定可用來限制在合作對象層級的遊戲的合作對象存取。

合作對象 joinability 可以動態變更，一旦建立遊戲的合作對象。 遊戲的合作對象 joinability 的狀態會反映在合作對象邀請 UI。 可以設為：

-   *僅限邀請 —* 此設定需要加入遊戲的合作對象的邀請。

-   *可聯結由朋友*（預設值）*—* 此設定需要加入遊戲的合作對象 （若要將合作對象，合作對象成員必須遵循聯結 player） 播放程式的 friend 關聯性。

Joinability 可用來建立僅限邀請的遊戲合作對象。 若要限制存取合作對象，而且需要玩家有收到邀請加入，joinability 應該設定為 [僅邀請]。

**注意：** 合作對象 joinability 不會影響工作階段 joinability 但合作對象 joinability 會反映在合作對象應用程式 UI。 播放程式可以變更標題的手動外部合作對象應用程式中的合作對象 joinability。

## <a name="recommendations"></a>建議


下列建議適用於最常見的 「 標題 」 案例。 標題應該遵循這些設定，可能的話，並應該使用標題中的邏輯對於是否新的播放程式就會准許到工作階段或不最終、 授權決定。

### <a name="recommended-game-session-visibility-open"></a>建議您遊戲的工作階段的可見性： 開啟

開啟遊戲的工作階段不需要玩家保留項目，藉此簡化的流程邀請。 工作階段主機或仲裁程式不會保留工作階段的文件中的播放程式之後已傳送邀請。 相反地，工作階段主機或仲裁程式只會追蹤受邀的播放程式在本機。 這可讓玩家以立即連線至主機，並判斷是否應加入的工作階段，會遭到拒絕，或應該等候 （如果支援等待播放程式）。 仲裁程式或主控件是最終授權單位和回應，並指示新的成員，或是留在保留工作階段。

**注意：** 這將需要啟動標題，並在進行最後決定之前，連接到主機或仲裁程式受邀的播放程式。 它是可以接受對使用者顯示錯誤訊息，如果工作階段已滿或已拒絕邀請。

> **注意：** 若要連接到主機或仲裁程式，安全的裝置位址需要。 **HostDeviceToken**工作階段中應該用來指出哪個工作階段的成員是目前的主機或工作階段和仲裁程式的受邀的播放程式應該連接至安全的裝置位址。

### <a name="recommended-game-session-joinability-default-not-set"></a>建議您遊戲的工作階段 joinability： 預設 (*未設定*)

目前 joinability 遊戲工作階段不會影響合作對象應用程式 UI，而不呈現給使用者。 若要簡化標題流程，遊戲 joinability 應該保持為預設值，並透過仲裁程式或主機處理所有聯結授權單位。

### <a name="recommended-game-party-joinability"></a>建議您遊戲的合作對象 joinability

遊戲的合作對象 joinability 是依據標題嘗試提供給使用者的工作階段的類型。 兩個案例包括：

-   開啟遊戲，開啟的遊戲，遊戲的合作對象 joinability 應保留預設值：聯結的朋友。 這可讓朋友分享遊戲的合作對象 （並延伸遊戲工作階段） 而不需要邀請。

-   私用的遊戲，對於私用或已關閉的遊戲，遊戲的合作對象 joinability 應設為 僅限邀請。 這會限制其他玩家加入合作對象 （並延伸遊戲工作階段） 而不需要邀請。

**注意**：播放程式可以手動變更 joinability 遊戲的工作階段，透過合作對象應用程式。

對於這兩個遊戲的型別，仲裁程式或主機應該仍然以判斷誰已接受到工作階段的最終授權。 這樣可應付切換為私用從開啟的遊戲流程可能會發生任何競爭情形。 如果仲裁程式/主機拒絕播放程式，應該移除工作階段中的播放程式被拒絕的標題的執行個體，並將其顯示以讓要讓合作對象的玩家的遊戲中 UI。

### <a name="maximum-session-size"></a>最大工作階段大小

工作階段的最大成員大小可用來限制加入遊戲工作階段的播放程式數目。 不過，這項限制可能會導致開啟的位置，以仍會顯示成完整是在特定期間中斷連線的案例。 比方說，如果播放程式會變成中斷連接，因為網路或電源失敗而導致，延遲是無法立即反映在工作階段。 成員會設定為非使用中只要存在服務偵測到中斷連線 （最多 20 秒），且播放程式將會移除過期的非作用中的逾時之後。

相較之下，會使用活動訊號偵測中斷連線的對等網狀結構通常是注意到中斷連線的兩到三秒內，並立即無法開啟的 player 位置。 不過，仲裁程式或主機無法移除其他成員。

若要解決此問題，工作階段的最大成員大小應該一律設定高於實際上支援標題的播放程式數目上限。 比方說，如果播放程式數目為 8，標題應該設定最大工作階段大小，在 12。 如此一來即使舊玩家有尚未逾，可以加入新的播放程式。仲裁程式或主應用程式會決定是否在工作階段已滿，然後將自訂工作階段屬性會決定是否仍然可以加入新的播放程式的集合 (**IsFull** :"true")。 這可讓您可聯結工作階段是否加入播放程式的快速檢查。

仲裁程式或主機應該也會維護此自訂的屬性，指出哪些成員中，依索引，已經逾時 (例如**TimedOutPlayers** :“3, 5, 9”). 這可讓新的播放程式，以正確識別目前工作階段的成員。

### <a name="notifying-waiting-players"></a>通知等候播放程式

標題可以管理除了遊戲的合作對象已排入佇列的播放程式清單，以支援等待播放程式。 當播放程式會連接到主應用程式和遊戲的工作階段已滿時，播放程式會加入至主機上的內部等候清單。 已排入佇列的播放程式不會聯結的遊戲的工作階段，但仍保留在遊戲的合作對象。 若要降低網路流量，等待播放程式中斷連線主機此時。

當遊戲工作階段中的位置開啟等待播放程式時，仲裁程式或主機新增保留項目播放程式藉由呼叫**AddMemberReservation**方法。 等待播放程式目前不是，但請留意此保留項目，因此仲裁程式或主應用程式必須呼叫**PullReservedPlayersAsync**方法。 這會導致 UI 快顯通知或**GameSessionReady**所有保留的播放程式，取決於快顯通知設定及標題焦點狀態的通知。 當收到此通知，並加入工作階段，新的播放程式重新連接至主應用程式。

或者，播放程式可以保持連線到主機，並加入工作階段，當主應用程式，系統會通知播放程式的位置可用。 不過，在此流程中無法顯示 UI 快顯通知外部標題。

**注意：** 如果標題已暫停，及/或終止，而且將不再收到通知，播放程式會自動移除遊戲的合作對象。

<a name="client-multiplayer-flow"></a>用戶端的多人遊戲流程
-----------------------
![](../../images/whitepapers/gamesessionvisibility_image1.png)
![](../../images/whitepapers/gamesessionvisibility_image2.png)
